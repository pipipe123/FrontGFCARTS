{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import React from'react';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{createEscuela}from'../services/compServices';import{addEscuelaToUser}from'../services/AuthService';import'../css/general.css';import'../css/escuela.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const schema=yup.object().shape({nombre:yup.string().required('El nombre de la escuela es obligatorio')});const Escuela=({usuario,onEscuelaSubmit})=>{const{register,handleSubmit,formState:{errors}}=useForm({resolver:yupResolver(schema)});const onSubmit=async data=>{try{const res=await createEscuela(data);console.log(res);let data2={escuela:data.nombre,usuario:usuario};await addEscuelaToUser(data2);console.log(data2);onEscuelaSubmit(data2.escuela);}catch(error){console.error('Error al crear la escuela o asociar al usuario',error);}};return _jsxs(\"div\",{className:\"forms-escuela\",children:[_jsx(\"div\",{className:\"mensaje\",children:_jsx(\"h1\",{children:\"Primer paso\"})}),_jsx(\"form\",{onSubmit:handleSubmit(onSubmit),children:_jsxs(\"div\",{className:\"forms-content-escuela\",children:[_jsx(\"h1\",{children:\"Registra tu escuela\"}),_jsx(\"table\",{children:_jsx(\"tr\",{children:_jsx(\"td\",{children:_jsxs(\"div\",{className:\"formularios-escuela\",children:[_jsx(\"input\",_objectSpread(_objectSpread({},register('nombre',{required:true})),{},{placeholder:\"Nombra a tu escuela\"})),errors.nombre&&_jsx(\"p\",{children:errors.nombre.message})]})})})}),_jsx(\"div\",{className:\"enviar\",children:_jsx(\"button\",{type:\"submit\",children:\"siguiente\"})})]})})]});};export default Escuela;","map":{"version":3,"names":["React","useForm","yupResolver","yup","createEscuela","addEscuelaToUser","jsx","_jsx","jsxs","_jsxs","schema","object","shape","nombre","string","required","Escuela","usuario","onEscuelaSubmit","register","handleSubmit","formState","errors","resolver","onSubmit","data","res","console","log","data2","escuela","error","className","children","_objectSpread","placeholder","message","type"],"sources":["C:/Estadias/FrontGFCARTS/components/escuela.js"],"sourcesContent":["import React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport { createEscuela } from '../services/compServices';\r\nimport { addEscuelaToUser } from '../services/AuthService';\r\nimport '../css/general.css'\r\nimport '../css/escuela.css'\r\n// Esquema de validación de yup\r\nconst schema = yup.object().shape({\r\n  nombre: yup.string().required('El nombre de la escuela es obligatorio'),\r\n});\r\n\r\nconst Escuela = ({ usuario, onEscuelaSubmit }) => {\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      const res = await createEscuela(data);\r\n      console.log(res);\r\n      let data2 = { escuela: data.nombre, usuario: usuario };\r\n      await addEscuelaToUser(data2);\r\n      console.log(data2);\r\n\r\n      // Llamar a la función onEscuelaSubmit para pasar la escuela al componente Gimnasio\r\n      onEscuelaSubmit(data2.escuela);\r\n    } catch (error) {\r\n      console.error('Error al crear la escuela o asociar al usuario', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='forms-escuela'>\r\n      <div className='mensaje'><h1>Primer paso</h1></div>\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <div className='forms-content-escuela'>\r\n          <h1>Registra tu escuela</h1>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                <div className='formularios-escuela'>\r\n                  <input {...register('nombre', { required: true })} placeholder='Nombra a tu escuela'/>\r\n                  {errors.nombre && <p>{errors.nombre.message}</p>}\r\n                </div>\r\n              </td>\r\n            </tr> \r\n          </table>\r\n          <div className='enviar'>\r\n            <button type=\"submit\">siguiente</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Escuela;\r\n"],"mappings":"+qBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAC1B,OAASC,aAAa,KAAQ,0BAA0B,CACxD,OAASC,gBAAgB,KAAQ,yBAAyB,CAC1D,MAAO,oBAAoB,CAC3B,MAAO,oBAAoB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,KAAM,CAAAC,MAAM,CAAGP,GAAG,CAACQ,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC,CAChCC,MAAM,CAAEV,GAAG,CAACW,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,wCAAwC,CACxE,CAAC,CAAC,CAEF,KAAM,CAAAC,OAAO,CAAGA,CAAC,CAAEC,OAAO,CAAEC,eAAgB,CAAC,GAAK,CAEhD,KAAM,CACJC,QAAQ,CACRC,YAAY,CACZC,SAAS,CAAE,CAAEC,MAAO,CACtB,CAAC,CAAGrB,OAAO,CAAC,CACVsB,QAAQ,CAAErB,WAAW,CAACQ,MAAM,CAC9B,CAAC,CAAC,CAEF,KAAM,CAAAc,QAAQ,CAAG,KAAO,CAAAC,IAAI,EAAK,CAC/B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAtB,aAAa,CAACqB,IAAI,CAAC,CACrCE,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChB,GAAI,CAAAG,KAAK,CAAG,CAAEC,OAAO,CAAEL,IAAI,CAACZ,MAAM,CAAEI,OAAO,CAAEA,OAAQ,CAAC,CACtD,KAAM,CAAAZ,gBAAgB,CAACwB,KAAK,CAAC,CAC7BF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC,CAGlBX,eAAe,CAACW,KAAK,CAACC,OAAO,CAAC,CAChC,CAAE,MAAOC,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,gDAAgD,CAAEA,KAAK,CAAC,CACxE,CACF,CAAC,CAED,MACE,CAAAtB,KAAA,QAAKuB,SAAS,CAAC,eAAe,CAAAC,QAAA,EAC5B1B,IAAA,QAAKyB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC1B,IAAA,OAAA0B,QAAA,CAAI,aAAW,CAAI,CAAC,CAAK,CAAC,CACnD1B,IAAA,SAAMiB,QAAQ,CAAEJ,YAAY,CAACI,QAAQ,CAAE,CAAAS,QAAA,CACrCxB,KAAA,QAAKuB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EACpC1B,IAAA,OAAA0B,QAAA,CAAI,qBAAmB,CAAI,CAAC,CAC5B1B,IAAA,UAAA0B,QAAA,CACE1B,IAAA,OAAA0B,QAAA,CACE1B,IAAA,OAAA0B,QAAA,CACExB,KAAA,QAAKuB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,EAClC1B,IAAA,SAAA2B,aAAA,CAAAA,aAAA,IAAWf,QAAQ,CAAC,QAAQ,CAAE,CAAEJ,QAAQ,CAAE,IAAK,CAAC,CAAC,MAAEoB,WAAW,CAAC,qBAAqB,EAAC,CAAC,CACrFb,MAAM,CAACT,MAAM,EAAIN,IAAA,MAAA0B,QAAA,CAAIX,MAAM,CAACT,MAAM,CAACuB,OAAO,CAAI,CAAC,EAC7C,CAAC,CACJ,CAAC,CACH,CAAC,CACA,CAAC,CACR7B,IAAA,QAAKyB,SAAS,CAAC,QAAQ,CAAAC,QAAA,CACrB1B,IAAA,WAAQ8B,IAAI,CAAC,QAAQ,CAAAJ,QAAA,CAAC,WAAS,CAAQ,CAAC,CACrC,CAAC,EACH,CAAC,CACF,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}