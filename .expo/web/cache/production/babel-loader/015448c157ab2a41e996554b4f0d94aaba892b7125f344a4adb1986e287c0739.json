{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import{readGimnasioxEscuela,deleteGimnasio}from'../services/compServices.js';import{FaBars,FaPlus,FaTrash}from'react-icons/fa';import{IoMdHome}from\"react-icons/io\";import Gimnasio from'../components/gimnasio';import{useManejoSesion}from'../services/sesion.js';import'../css/misgimnasios.css';import HeaderHome from'../components/header-home';import{MdEmojiEvents}from\"react-icons/md\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const MisGimnasios=()=>{const navigate=useNavigate();const[usuario,setUsuario]=useState('');const location=useLocation();const{escuela}=location.state||{escuela:''};const[gimnasios,setGimnasios]=useState([]);const[error,setError]=useState(null);const[showForm,setShowForm]=useState(false);useEffect(()=>{const user=location.state?.usuario||null;setUsuario(user);useManejoSesion(user,navigate);if(escuela){readGimnasioxEscuela(escuela).then(response=>{setGimnasios(response.data);}).catch(error=>{setError(error.message);});}},[escuela]);const handleGymClick=gimnasio=>{navigate('/Mis_Competidores',{state:{gimnasio:gimnasio.nombre,escuela:escuela,usuario:usuario}});};const handleAddGimnasioClick=()=>{setShowForm(true);};const handleGimnasioSubmit=nombre=>{setShowForm(false);readGimnasioxEscuela(escuela).then(response=>{setGimnasios(response.data);}).catch(error=>{setError(error.message);});};const handleDeleteGimnasio=nombre=>{if(window.confirm('¿Estás seguro de que deseas eliminar este gimnasio?')){data={nombre:nombre};console.log(data);deleteGimnasio(data).then(()=>{readGimnasioxEscuela(escuela).then(response=>{setGimnasios(response.data);}).catch(error=>{setError(error.message);});}).catch(error=>{console.error('Error al eliminar gimnasio:',error);setError('Error al eliminar gimnasio.');});}};const menu=()=>{navigate('/home',{state:{usuario:usuario}});};const events=()=>{navigate('/Torneos',{state:{escuela:escuela,usuario:usuario}});};if(error){return _jsxs(\"div\",{children:[\"Error: \",error]});}return _jsxs(\"div\",{className:\"container-misgimnasios\",children:[_jsx(HeaderHome,{usuario:usuario}),_jsx(\"div\",{className:\"sidebar-misgimnasios\",children:_jsxs(\"ul\",{children:[_jsx(\"li\",{children:_jsx(FaBars,{className:\"menu-icon-main\"})}),_jsx(\"li\",{children:_jsxs(\"button\",{onClick:menu,children:[_jsx(IoMdHome,{className:\"menu-icon\"}),_jsx(\"p\",{children:\"Menu\"})]})}),_jsx(\"li\",{children:_jsxs(\"button\",{onClick:events,children:[_jsx(MdEmojiEvents,{className:\"menu-icon\"}),_jsx(\"p\",{children:\"Eventos\"})]})}),_jsx(\"li\",{}),_jsx(\"li\",{children:_jsxs(\"button\",{onClick:handleAddGimnasioClick,children:[_jsx(FaPlus,{className:\"add-icon-misgimnasios\"}),_jsx(\"p\",{children:\"a\\xF1adir gimnasio\"})]})})]})}),_jsxs(\"div\",{className:\"content-misgimnasios\",children:[_jsxs(\"h2\",{children:[\"Gimnasios de la escuela \",escuela]}),_jsx(\"div\",{className:\"scrollable-content-misgimnasios\",children:gimnasios.length===0?_jsx(\"p\",{children:\"No se encontraron gimnasios para esta escuela.\"}):_jsx(\"ul\",{children:gimnasios.map((gimnasio,index)=>_jsxs(\"li\",{onClick:()=>handleGymClick(gimnasio),children:[_jsx(\"h3\",{children:gimnasio.nombre}),_jsxs(\"p\",{children:[\"Escuela: \",gimnasio.escuela]}),_jsxs(\"p\",{children:[\"Entrenador: \",gimnasio.entrenador]}),_jsx(FaTrash,{className:\"delete-icon\",onClick:e=>{e.stopPropagation();handleDeleteGimnasio(gimnasio.nombre);}})]},index))})}),showForm&&_jsx(Gimnasio,{escuela:escuela,onGimnasioSubmit:handleGimnasioSubmit}),_jsx(\"div\",{className:\"fondo-principal-misgimnasios\",children:_jsx(\"img\",{src:\"../assets/fondo-principal.jpg\",alt:\"Fondo Principal\"})})]})]});};export default MisGimnasios;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","readGimnasioxEscuela","deleteGimnasio","FaBars","FaPlus","FaTrash","IoMdHome","Gimnasio","useManejoSesion","HeaderHome","MdEmojiEvents","jsxs","_jsxs","jsx","_jsx","MisGimnasios","navigate","usuario","setUsuario","location","escuela","state","gimnasios","setGimnasios","error","setError","showForm","setShowForm","user","then","response","data","catch","message","handleGymClick","gimnasio","nombre","handleAddGimnasioClick","handleGimnasioSubmit","handleDeleteGimnasio","window","confirm","console","log","menu","events","children","className","onClick","length","map","index","entrenador","e","stopPropagation","onGimnasioSubmit","src","alt"],"sources":["C:/Estadias/FrontGFCARTS/screens/misgimnasios.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { readGimnasioxEscuela, deleteGimnasio } from '../services/compServices.js';\r\nimport { FaBars, FaPlus, FaTrash } from 'react-icons/fa';\r\nimport { IoMdHome } from \"react-icons/io\";\r\nimport Gimnasio from '../components/gimnasio';\r\nimport { useManejoSesion } from '../services/sesion.js';\r\nimport '../css/misgimnasios.css'; // Cambié el nombre del archivo CSS para que coincida con el nuevo nombre de clase\r\nimport HeaderHome from '../components/header-home';\r\nimport { MdEmojiEvents } from \"react-icons/md\";\r\n\r\nconst MisGimnasios = () => {\r\n  const navigate = useNavigate();\r\n  const [usuario, setUsuario] = useState('');\r\n  const location = useLocation();\r\n  const { escuela } = location.state || { escuela: '' };\r\n\r\n  const [gimnasios, setGimnasios] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const user = location.state?.usuario || null;\r\n    setUsuario(user);\r\n    useManejoSesion(user, navigate);\r\n    if (escuela) {\r\n      readGimnasioxEscuela(escuela)\r\n        .then(response => {\r\n          setGimnasios(response.data);\r\n        })\r\n        .catch(error => {\r\n          setError(error.message);\r\n        });\r\n    }\r\n  }, [escuela]);\r\n\r\n  const handleGymClick = (gimnasio) => {\r\n    navigate('/Mis_Competidores', { state: { gimnasio: gimnasio.nombre, escuela: escuela, usuario: usuario } });\r\n  };\r\n\r\n  const handleAddGimnasioClick = () => {\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleGimnasioSubmit = (nombre) => {\r\n    setShowForm(false);\r\n    readGimnasioxEscuela(escuela)\r\n      .then(response => {\r\n        setGimnasios(response.data);\r\n      })\r\n      .catch(error => {\r\n        setError(error.message);\r\n      });\r\n  };\r\n\r\n  const handleDeleteGimnasio = (nombre) => {\r\n    if (window.confirm('¿Estás seguro de que deseas eliminar este gimnasio?')) {\r\n      data = {nombre:nombre}\r\n      console.log(data)\r\n      deleteGimnasio(data)\r\n        .then(() => {\r\n          // Actualiza la lista de gimnasios después de eliminar\r\n          readGimnasioxEscuela(escuela)\r\n            .then(response => {\r\n              setGimnasios(response.data);\r\n            })\r\n            .catch(error => {\r\n              setError(error.message);\r\n            });\r\n        })\r\n        .catch(error => {\r\n          console.error('Error al eliminar gimnasio:', error);\r\n          setError('Error al eliminar gimnasio.');\r\n        });\r\n    }\r\n  };\r\n\r\n  const menu = () => {\r\n    navigate('/home', { state: { usuario: usuario } });\r\n  };\r\n\r\n  const events = () => {\r\n    navigate('/Torneos', { state: { escuela: escuela, usuario: usuario } });\r\n  };\r\n\r\n  if (error) {\r\n    return <div>Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className='container-misgimnasios'>\r\n      <HeaderHome usuario={usuario} />\r\n      <div className='sidebar-misgimnasios'>\r\n        <ul>\r\n          <li><FaBars className=\"menu-icon-main\" /></li>\r\n          <li><button onClick={menu}><IoMdHome className=\"menu-icon\"/><p>Menu</p></button></li>\r\n          <li><button onClick={events}><MdEmojiEvents className=\"menu-icon\"/><p>Eventos</p></button></li>\r\n          <li></li>\r\n          <li><button onClick={handleAddGimnasioClick}><FaPlus className=\"add-icon-misgimnasios\" /><p>añadir gimnasio</p></button></li>\r\n        </ul>\r\n      </div>\r\n      <div className='content-misgimnasios'>\r\n        <h2>Gimnasios de la escuela {escuela}</h2>\r\n        <div className='scrollable-content-misgimnasios'>\r\n          {gimnasios.length === 0 ? (\r\n            <p>No se encontraron gimnasios para esta escuela.</p>\r\n          ) : (\r\n            <ul>\r\n              {gimnasios.map((gimnasio, index) => (\r\n                <li key={index} onClick={() => handleGymClick(gimnasio)}>\r\n                  <h3>{gimnasio.nombre}</h3>\r\n                  <p>Escuela: {gimnasio.escuela}</p>\r\n                  <p>Entrenador: {gimnasio.entrenador}</p>\r\n                  <FaTrash\r\n                    className='delete-icon'\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleDeleteGimnasio(gimnasio.nombre);\r\n                    }}\r\n                  />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        {showForm && <Gimnasio escuela={escuela} onGimnasioSubmit={handleGimnasioSubmit} />}\r\n        <div className='fondo-principal-misgimnasios'>\r\n          <img src=\"../assets/fondo-principal.jpg\" alt=\"Fondo Principal\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MisGimnasios;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}